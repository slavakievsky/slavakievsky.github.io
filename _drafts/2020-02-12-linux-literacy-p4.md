---
layout: post
title: Методичка линуксоида. Ликбез по GNU/Linux. Часть 4.
description: Методичка начинающего линуксоида. Часть о правах пользователей и устройстве системы разграничения доступа.
tags: [linux, guide]
---

В этой части будут рассмотрены системы разграничения прав и контроля доступа в системах GNU/Linux, не позволяющие кому попало получить доступ
 к различным компонентам операционной системы.

Будет затронута тема терминалов, и таинственных "эмуляторов терминалов".

Погнали!
<!--more-->

## Система разграничения прав и контроля доступа

Историческая правда: системы GNU/Linux многопользовательские. Речь не обязательно идёт о человеческих пользователях ~~(убить всех человеков)~~:
практически каждая уважающая себя служба в системе действует от имени собственного пользователя. MySQL, Avahi, DBus, DHDPDC, Cups... А что касается
моего любимого SystemD -- у него для каждой подсистемы по отдельному пользователю.

Звучит, как бред? Конечно же да. К счастью для нас именно такой подход к организации работы различных подсистем уберегает нашу дргоценную ОСь
от значительного количества потенциально реализуемых атак/уязвимостей. Дело в том, что каждый файл в POSIX совместивой файловой системе содержит информацию о владельце
и о том, какие права владелец делегирует другим пользователям. Таким образом, с одной стороны, некая системная служба имеет доступ только к своим и общедоступным файлам,
а с другой -- файлы самой службы защищены от несанкционированного доступа со стороны других подсистем. Кроме того данны подход достаточно крепко связывает
шаловливые ручонки начинающих линуксоидов (до тех пор, правда, пока в их жизни не появится команда **sudo**).

### Терминалы

Вы закрываете глаза. Вам хорошо, Вас ничто не тревожит. Вы слышите шелест листьев.
Ваш слух наслаждается шуршанием печатных машинок и мерным жужжанием автоматического печатающего привода.
Вы открываете глаза и видите перед собой _телетайп_. На крае высунувшейся бумажки -- приглашение ввода команды.

Такова история, пожалуй, первых компьютерных терминалов. Что же, собственно, такое эти терминалы?

Все мы знаем, а я просто напомню, что **терминал** -- конечная часть системы, обеспечивающая связь с внешней средой.
Экая-некая точка, в которой заканчивается матрица и начинается реальный мир: "кротовая нора" между суб-реальностями.

К примеру, эта нора может связывать наш реальный мир и операционную систему вычислительной машины. Примерно такими "норами"
и являлись описанные мною ранее _teletype_. Компьютеры всегда были достаточно дорогим удовольствием, особенно на заре своего развития,
чтобы каждый сотрудник, к примеру, лаборатории имел доступ к собственной машине. В связи с этим, как правило, либо доступ в одно время
имел только один человек, либо (при достаточной мощности ЭВМ) у каждого сотрудника был собственный терминал, с помощью которого
производилось взаимодействие с ацкой машиной.

Так или иначе терминал всегда играл роль переводчика на переговорах человека и компьютера.

### Пользователи и группы

Петя, Вася, Катя, Денис и Никита -- пользователи дорогущей ЭВМ 90-х годов. Катя и Никита -- младшие научные сотрудники, поэтому они
могут просматривать файлы исследований, но не могут вносить правки. Петя и Катя следят за расписанием проведения экспериментов,
поэтому они могут редактировать соответствующую таблицу. Вася -- старший учёный. Он имеет доступ ко всем файлам кроме расписания. Денису,
как стажёру, доступно только чтение расписания. Также у каждого пользователя есть личные файлы, доступ к которым имею только они сами.

Что мы узнали из приведенных выше данных? Мы узнали, что
  * Существует три типа файлов
  * Количество пользователей компьютера -- 5
  * Пользователи разделены на 4 группы
  * У каждого пользователя определенной группы есть соответствующие права и ограничения
  * Один пользователь может состоять в нескольких группах сразу

Из собранной информации можно составить такую таблицу:

|Файл|Права младших сотрудников|Права составителей расписания|Права старшего ученого|Права стажёра|
|Исследование|чтение|-|чтение, запись|-|
|Расписание|чтение|чтение, запись|чтение|чтение|
|Личный файл|-|-|-|-|

Легко заметить, что раписание могут читать все, а записывать в него -- только участники группы составителей.
Аналогичные рассуждения касаются и файлов с исследованиями.

А сейчас я выверну таблицу "наизнанку", смотри, что получается:

|Файл|Владелец|Группа|Все остальные|
|Исследование|чтение, запись|чтение|-|
|Расписание|чтение, запись|чтение, запись|чтение|
|Личный файл|чтение, запись|-|-|

Владельцем файлов исследований является Вася, а Катя с Никитой состоят в группе, имеющей доступ к этому файлу.
То же самое касается и всех остальных файлов.

Теперь ты непременно получил представление о том что такое пользователь, группа и права.

### Разграничение прав

Мы вплотную подобрались к тому, что называется "системой дискреционного разграничения доступа". В такой системе
предполагается назначения для каждого файла владельца, который определяет, какие права доступа к этому файлу имеют
остальные пользователи. В Linux каждому файлу назначается не только пользователь-владелец, но и группа-владелец. При этом "владеть" фалом
-- вовсе не значит иметь все возможные права.

В POSIX-совместимых ОС (Linux туда же) существуют следующие права взаимодействия с фалом:
  * Чтение (**R**ead)
  * Запись (**W**rite)
  * Исполнение (e**X**ecute)

Таким образом любому файлу в системе присущи следующие аттрибуты:
  * Пользователь-владелец
  * Группа-владелец
  * Права пользователя
  * Права группы
  * Права для всех остальных

Посмотрим вывод следующей команды:

```shell
$ ls -l
lrwxrwxrwx 1 manuk manuk 25 мар 17 10:43 Downs -> /@fs/@win/@data/Downloads
```

Каждый файл представлен одной строчкой:

|Тип файла|Права||||||||
||||||||||

### Повышение привилегий
### Системы расширенного контроля доступа

## Драйверы и оборудование

###
###
###
###
###

## Сети и Интернет

### IP, DHCP
### DNS
### IPTables, NFTables
### VPN
### Proxy
### Tor
